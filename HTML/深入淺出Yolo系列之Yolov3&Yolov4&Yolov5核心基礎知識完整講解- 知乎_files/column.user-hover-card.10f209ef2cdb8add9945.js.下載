(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1496:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),l=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M9.676 11.252c-.243.433-.542.85-.494 1.237.189 1.509 2.938 1.807 3.746 2.816.59.736.835 1.852.892 3.725.01.303 0 .97-.867.97H1.933c-.915 0-.925-.643-.915-.936.062-1.877.292-3.02.895-3.76.812-.994 3.743-1.267 3.872-2.872.03-.361-.246-.74-.493-1.18C3.917 8.802 3.39 4 7.466 4s3.506 4.941 2.21 7.252zm8.073.79l.002.641c1.57 1.766 4.47 1.307 4.851 3.166.125.61.328 1.538.384 3.232.009.284.014.919-.905.919-.92 0-5.523-.021-6.875-.019 0-2.806-.144-5.987-2.707-6.285.537-.331 1.725-.504 2.178-1.013l.002-.64c-.881.118-2.679-.541-2.679-.541.61-.64.747-1.387 1.192-4.317.355-2.93 2.835-2.903 3.022-2.903.187 0 2.667-.027 3.028 2.903.439 2.93.577 3.677 1.186 4.317 0 0-1.797.659-2.68.54z",fillRule:"evenodd"}))};l.defaultProps={name:"Users"},t.a=l},1575:function(e,t,n){},1617:function(e,t,n){"use strict";n.r(t);var a=n(23),o=n(4),r=n(8),l=n(7),c=n(5),s=n(6),i=n(15),u=n(0),b=n(2),d=n.n(b),p=n(1),m=n.n(p),O=n(12),h=n(31),j=n(129),f=n.n(j),g=n(351),v=n(206),k=n(272),C=n(17),w=function(e){return m.a.createElement(C.a,e,m.a.createElement("path",{d:"M17 6.998h3.018c1.098 0 1.975.89 1.982 2.002v10a1.993 1.993 0 0 1-1.987 2H3.98A1.983 1.983 0 0 1 2 19l.009-10.003c0-1.11.873-1.999 1.971-1.999L7 7V5c.016-1.111.822-2 2-2h6c.98 0 1.86.889 2 2v1.998zM9 7h6V5.5s0-.5-.5-.5h-5c-.504 0-.5.5-.5.5V7z",fillRule:"evenodd"}))};w.defaultProps={name:"Company"};var y=w,M=n(1496),T=n(16),U=n(167),N=n(11),x=n(62),S=n(9),E=n.n(S),R=n(10),z=function(e){return m.a.createElement(C.a,e,m.a.createElement("path",{d:"M18.376 5.624c-3.498-3.499-9.254-3.499-12.752 0-3.499 3.498-3.499 9.254 0 12.752 3.498 3.499 9.254 3.499 12.752 0 3.499-3.498 3.499-9.14 0-12.752zm-1.693 1.693c2.37 2.37 2.596 6.094.678 8.69l-9.367-9.48c2.708-1.919 6.32-1.58 8.69.79zm-9.48 9.48c-2.37-2.37-2.595-6.095-.676-8.69l9.48 9.48c-2.822 1.918-6.433 1.58-8.803-.79z",fillRule:"evenodd"}))};z.defaultProps={name:"Ban"};var B,L,P,F=z,_=n(120),q=n(119),A=n(299),I=n(96),G=n(24),H=n(20),V=(n(1575),Object(O.connect)(null,{updateUserBlocking:I.i,showNotification:G.g})((P=L=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={reportModalShown:!1},n.handleShieldUser=function(){var e=n.props,t=e.user.urlToken,a=e.updateUserBlocking,o=e.showNotification;a(t,!1).then(function(){return o("屏蔽已取消")})},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.user,o=a.urlToken,r=a.isBlocking,l=a.isOrg,c=t.className,s=t.buttonClassName,i=t.onModalOpen,b=t.onModalClose,d=this.context.authRequired,p=this.state.reportModalShown,m=E()("MemberButtonGroup",c);return r?Object(u.b)("div",{className:m},Object(u.b)(R.c,{className:s,preset:"primary",color:"red",onClick:this.handleShieldUser},Object(u.b)(F,{center:!0,text:!0})," 已屏蔽"),!l&&Object(u.b)(R.c,{className:s,onClick:d(function(){e.setState({reportModalShown:!0}),i&&i()},H.I.report)},"举报用户",Object(u.b)(q.b,{shown:p,onClose:function(){e.setState({reportModalShown:!1}),b&&b()},type:"member",urlToken:o,zaEnabled:!0}))):Object(u.b)("div",{className:m},Object(u.b)(_.a,{id:o,type:n.type,gender:n.gender,isFollowing:n.isFollowing,className:s,preset:_.a.PRESETS.primary}),Object(u.b)(A.a,{user:n,className:s,onModalOpen:i,onModalClose:b}))}}]),t}(p.Component),L.contextTypes={authRequired:d.a.func},L.propTypes={user:d.a.object.isRequired,buttonClassName:d.a.string,onModalOpen:d.a.func,onModalClose:d.a.func},B=P))||B),J=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.user.isOrg,o=t.className,r=t.buttonClassName,l=t.onModalOpen,c=t.onModalClose,s=this.context,i=s.currentUser,b=s.authRequired,d=s.router,p=E()("ProfileButtonGroup",o);return i&&n.urlToken===i.urlToken?Object(u.b)("div",{className:p},Object(u.b)(R.c,{color:"blue",className:r,onClick:b(function(){N.a.trackEvent(e,{action:"OpenUrl",element:"Link"},{link:{url:"".concat(location.origin,"/people/edit")}}),d.push("/people/edit")},H.I.editProfile)},"编辑",a?"机构":"个人","资料")):Object(u.b)(V,{user:n,className:p,buttonClassName:r,onModalOpen:l,onModalClose:c})}}]),t}(p.Component);J.contextTypes={router:d.a.object.isRequired,currentUser:d.a.object,authRequired:d.a.func},J.propTypes={user:d.a.object.isRequired,buttonClassName:d.a.string,onModalOpen:d.a.func,onModalClose:d.a.func};var K=J,D=n(198),Q=n(79),W=n(612),X=n(550),Y=function(e,t){return e.map(function(e){return t[e]}).slice(0,3)},Z=Object(x.isBrowser)()?f()(Y,function(e,t){return"".concat(e.join(","),"-").concat(t.length)}):Y,$=[];var ee={name:"bmafnj",styles:"&:not(:last-child){margin-bottom:8px;}"},te=function(e){return Object(u.b)(T.d,Object(i.default)({css:ee},e))},ne={name:"1emg6zg",styles:"margin-right:.3em;"},ae={name:"1emg6zg",styles:"margin-right:.3em;"},oe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,childModalOpened:!1},n.loadUserProfile=function(){var e=n.props,t=e.id,a=e.urlToken;return(0,e.dispatch)(Object(I.h)(a||t,!1))},n.load=function(){var e=n.props,t=e.id;(e.urlToken||t)&&(n.setState({isLoading:!0}),n.loadUserProfile().then(function(){return n.setState({isLoading:!1})}),n.loadMutuals())},n.loadMutuals=function(){var e=n.props,t=e.user,a=e.dispatch,o=e.mutuals;return!(void 0===o?[]:o).length&&n.context.currentUser&&t?a(Object(I.f)(t.urlToken,"mutuals")):Promise.resolve()},n.track=function(){var e=n.props.user;n.hoverCardElement&&e&&(N.a.setModule(n.hoverCardElement,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id}}}),N.a.trackCardShow(n.hoverCardElement))},n.handleOpen=function(){n.load(),n.track()},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t,n=this,o=this.props,r=o.toggler,l=o.user,c=o.id,s=o.urlToken,b=o.mutuals,d=void 0===b?[]:b,p=o.onRef,m=Object(a.a)(o,["toggler","user","id","urlToken","mutuals","onRef"]),O=l||{},j=O.isOrg,f=O.name,C=O.headline,w=O.avatarUrl,N=O.badge,x=O.badgeV2,S=O.answerCount,E=O.articlesCount,R=O.followerCount,z=O.employments,B=O.coverUrl,L=O.gender,P=O.isFollowed,F=O.isFollowing,_=this.state,q=_.isLoading,A=_.childModalOpened,I=d.length,G=Object(U.d)(x||N),V=G.bestAnswerer,J=G.identity,Y="//www.zhihu.com/".concat(j?"org":"people","/").concat(s||c),Z=this.context.currentUser,$=Z&&l&&Z.urlToken===l.urlToken,ee=I>0&&!$,oe=z&&z[0];if(null==J?void 0:J.length)t=Object(u.b)(te,null,Object(u.b)("a",{href:"".concat(H.v,"/account/verification/intro"),target:"_blank",rel:"noopener noreferrer",css:ne},Object(u.b)(U.a,null)),Object(u.b)("div",null,J.slice(0,2).map(function(e){return e.description}).join("，")));else if(oe){var re=oe.company,le=oe.job;t=Object(u.b)(te,null,(re||le)&&Object(u.b)(T.a,{as:"span",mr:".3em",color:"GBL05A"},Object(u.b)(y,{text:!0,center:!0})),Object(u.b)("div",null,re&&re.name,re&&le&&Object(u.b)(T.a,{display:"inline-block",width:"1px",height:"10px",mx:"8px",bg:"GBK09A"}),le&&le.name))}else t=null;return Object(u.b)(k.b,Object(i.default)({toggler:r,onOpen:this.handleOpen,isLoading:q,globalClose:!A,stickHover:A,preventCloseOnTarget:!0},m,{onRef:function(e){p&&"function"==typeof p&&p(e),n.hoverCardElement=e}}),Object(u.b)(k.a,{coverUrl:B,title:Object(u.b)("span",null,Object(u.b)(h.Link,{to:Y,target:"_blank"},f),Object(u.b)(X.a,{isFollowed:P,isFollowing:F})),subtitle:C&&Object(u.b)(D.a,{inline:!0,html:C}),avatarUrl:w}),(t||V||ee)&&Object(u.b)("div",null,t,Boolean(null==V?void 0:null===(e=V.topics)||void 0===e?void 0:e.length)&&Object(u.b)(te,null,Object(u.b)("span",{css:ae},Object(u.b)(U.b,null)),Object(u.b)("div",null,Object(u.b)(W.a,{expandable:!1,noHoverCard:!0,topics:V.topics,user:l}),"的优秀回答者")),ee&&Object(u.b)(te,{color:"GBL05A"},Object(u.b)(T.a,{mr:".3em"},Object(u.b)(M.a,{text:!0,center:!0})),Object(u.b)("div",null,Object(u.b)(g.CJKSpace,null,d.map(function(e,t){return Object(u.b)(h.Link,{key:t,to:"//www.zhihu.com/".concat(j?"org":"people","/").concat(e.urlToken),target:"_blank"},e.name,t<I-1&&"、")}),"也关注了",H.C[L])))),Object(u.b)("div",null,Object(u.b)(v.a,null,Object(u.b)(v.a.Item,{tag:Q.a,preset:"plain",to:"".concat(Y,"/answers"),name:"回答",value:S,target:"_blank"}),Object(u.b)(v.a.Item,{tag:Q.a,preset:"plain",to:"".concat(Y,"/posts"),name:"文章",value:E,target:"_blank"}),Object(u.b)(v.a.Item,{tag:Q.a,preset:"plain",to:"".concat(Y,"/followers"),name:"关注者",value:R,target:"_blank"})),l&&!$&&Object(u.b)(K,{className:"HoverCard-buttons",user:l,onModalOpen:function(){n.hoverCardElement.style.opacity="0",n.setState({childModalOpened:!0})},onModalClose:function(){return n.setState({childModalOpened:!1})}})))}}]),t}(p.PureComponent);oe.contextTypes={currentUser:d.a.object};t.default=Object(O.connect)(function(e,t){var n=t.id,a=t.urlToken,o=e.entities,r=e.people.mutualsByUser,l=o.users[a]||Object.values(o.users).find(function(e){return e.id===n})||t.user,c=r[a||n]||{ids:$,isFetching:!1},s=c.ids,i=c.isFetching;return{user:l,mutuals:Z(s,o.users),isFetching:i}})(oe)}}]);
//# sourceMappingURL=column.user-hover-card.10f209ef2cdb8add9945.js.map